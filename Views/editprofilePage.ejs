<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edit Profile - PrimeCare</title>
<link rel="stylesheet" href="../css/book-appointment.css" />
<link rel="stylesheet" href="../css/user_profile.css">
<link rel="stylesheet" href="../css/edit_profile.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
  <nav>
    <div class="navbar-container">
      <a href="/" class="site-name">Prime Care</a>
      <div class="navbar-links">
        <a href="/" class="<%= currentPage === 'home' ? 'active' : '' %>">HOME</a>
        <a href="/User/about" class="<%= currentPage === 'about' ? 'active' : '' %>">ABOUT US</a>
        <a href="/Department/view" class="<%= currentPage === 'departments' ? 'active' : '' %>">DEPARTMENTS</a>
        <a href="/doctors" class="<%= currentPage === 'doctors' ? 'active' : '' %>">DOCTORS</a>
        <a href="/appointments/quick-appointment" class="<%= currentPage === 'book' ? 'active' : '' %>">BOOK NOW</a>
        <% if (user) { %>
          <a href="/User/profile" class="<%= currentPage === 'profile' ? 'active' : '' %>">My Profile</a>
          <a href="/User/logout" class="logout-btn">Logout</a>
        <% } else { %>
          <a href="/User/login" class="<%= currentPage === 'login' ? 'active' : '' %>">Login</a>
          <a href="/Patient/signup" class="signup-btn <%= currentPage === 'signup' ? 'active' : '' %>">Sign Up</a>
        <% } %>
      </div>
    </div>
  </nav>
  <div class="container">
  <div class="row">
    <div class="col-md-6 col-12">
      <!-- Content here -->
    </div>
    <div class="col-md-6 col-12">
      <!-- Content here -->
    </div>
  </div>
</div>
  <main>
    <div class="container">
      <div class="edit-profile-form">
          <h2>Edit Profile</h2>
          <form id="editProfileForm">
              <div class="form-group">
                  <label for="name">Full Name</label>
                  <input type="text" id="name" value="<%= user ? (user.FName + ' ' + user.LName) : '' %>">
              </div>
              <div class="form-group">
                  <label for="email">Email</label>
                  <input type="email" id="email" value="<%= user ? user.Email : '' %>">
              </div>
              <div class="form-group">
                  <label for="dob">Date of Birth</label>
                  <input type="date" id="dob" value="<%= user && user.DateOfBirth ? user.DateOfBirth.toISOString().substring(0,10) : '' %>">
                  <% /* Consider updating User model to store DateOfBirth (Date type) if you want to pre-populate this */ %>
              </div>
              <div class="form-group">
                  <label for="gender">Gender</label>
                  <select id="gender">
                      <option value="Male" <%= user && user.Gender === 'Male' ? 'selected' : '' %>>Male</option>
                      <option value="Female" <%= user && user.Gender === 'Female' ? 'selected' : '' %>>Female</option>
                      <option value="Other" <%= user && user.Gender === 'Other' ? 'selected' : '' %>>Other</option>
                  </select>
              </div>
              <div class="form-group">
                  <label for="phone">Phone</label>
                  <input type="tel" id="phone" value="<%= user ? user.PhoneNumber : '' %>">
              </div>
              <div class="form-group">
                  <label for="address">Address</label>
                  <input type="text" id="address" value="<%= user ? user.Address : '' %>">
              </div>
              <div class="form-group">
                  <label for="doctor">Primary Doctor</label>
                  <input type="text" id="doctor" value="<%= patient ? patient.primaryDoctor : '' %>">
              </div>
              <div class="form-group">
                  <label for="insurance">Insurance</label>
                  <input type="text" id="insurance" value="<%= patient ? patient.insuranceName : '' %>">
              </div>
              <div class="form-group">
                  <label for="profileImage">Profile Image</label>
                  <input type="file" id="profileImage">
                  <% if (user && user.profileImagePath) { %>
                    <img src="<%= user.profileImagePath %>" alt="Current Profile Image" style="max-width: 100px; margin-top: 10px;">
                  <% } %>
              </div>
              <div class="form-actions">
                  <a href="/User/profile" class="btn btn-outline">Cancel</a>
                  <button type="submit" class="btn btn-primary">Save Changes</button>
              </div>
          </form>
      </div>
    </div>
  </main>
  <script src="/javascript/edit_profile.js"></script>
  </body>
</html>
